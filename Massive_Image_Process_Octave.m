clear all;% close all;file_path = './Images/';img_path_list = dir(strcat(file_path,'*.JPG'));% img_path_list = dir(sprintf('%s/*.JPG', file_path));img_num = length(img_path_list);if img_num > 0  I = imread(strcat(file_path,img_path_list(1).name));  imshow(I);  flag_1 = waitforbuttonpress;              % wait for mouse action  point1 = get(gca,'CurrentPoint');    % click  % point1 = ginput(1);  % finalRect = rbbox;      flag_3 = waitforbuttonpress;               %  point2 = get(gca,'CurrentPoint');    % select end  % point2 = ginput(1);  point1 = point1(1,1:2);              % get two points  point2 = point2(1,1:2);  p1 = min(floor(point1), floor(point2));             % calculate the area  p2 = max(floor(point1), floor(point2));  offset = abs(floor(point1) - floor(point2));         % offset(1)-width?offset(2)-height  x = [p1(1) p1(1)+offset(1) p1(1)+offset(1) p1(1) p1(1)];  y = [p1(2) p1(2) p1(2)+offset(2) p1(2)+offset(2) p1(2)];  hold on;                             %avoid plot flashing  plot(x,y,'r');  for i = 1 : 3    II = I(:,:,i);    I2(:,:,i) = II(p1(2):p2(2), p1(1):p2(1));  end  figure(2);  imshow(I2, 'InitialMagnification' , 'fit'); % the cropped image is displayed  flag_2 = waitforbuttonpress;  point3 = get(gca,'CurrentPoint');  % finalRect_2 = rbbox;  flag_4 = waitforbuttonpress;  point4 = get(gca,'CurrentPoint');  point3 = point3(1,1:2);  point4 = point4(1,1:2);  p3 = min(floor(point3), floor(point4));  p4 = max(floor(point3), floor(point4));  offset_2 = abs(floor(point3) - floor(point4));  x_2 = [p3(1) p3(1)+offset_2(1) p3(1)+offset_2(1) p3(1) p3(1)];  y_2 = [p3(2) p3(2) p3(2)+offset_2(2) p3(2)+offset_2(2) p3(2)];  hold on;  plot(x_2, y_2, 'r');  close all;  for i = 1:img_num    img_name = img_path_list(i).name;    image =  imread(strcat(file_path,img_name));    for m = 1 : 3      II = image(:,:,m);      image_2(:,:,m) = II(p1(2):p2(2), p1(1):p2(1));    end    Measure_Image = rgb2gray(I2);    Measure_Matrix = Measure_Image(p3(2):p4(2), p3(1):p4(1));    Result_Column = mean(Measure_Matrix);    Result_Row = mean(Measure_Matrix, 2)';    %fprintf('%d %d %s\n',i,1j,strcat(file_path,img_name));    figure('NumberTitle', 'off', 'Name', strcat('Results of', 32, img_path_list(i).name));    subplot(2,2,1);    imshow(image);    hold on;    plot(x,y,'r');    subplot(2,2,2);    imshow(image_2);    hold on;    plot(x_2, y_2, 'r');    subplot(2,2,3);    plot(Result_Column);    title('Vertical');    set(gca, 'FontSize', 20);    subplot(2,2,4);    plot(Result_Row);    title('Horizontal');    set(gca, 'FontSize', 20);    % suptitle(img_path_list(i).name);    Rev_V(:,:,i) = Result_Column;    Rev_H(:,:,i) = Result_Row;  end  figure('NumberTitle', 'off', 'Name', 'Vertical Resolution');  b = floor(sqrt(img_num));  a = ceil(img_num / b);  for k = 1:img_num    subplot(a,b,k);    plot(Rev_V(:,:,k));    title(img_path_list(k).name);  end  % suptitle('Vertical');  figure('NumberTitle', 'off', 'Name', 'Horizontal Resolution');  b = floor(sqrt(img_num));  a = ceil(img_num / b);  for k = 1:img_num    subplot(a,b,k);    plot(Rev_H(:,:,k));    title(img_path_list(k).name);  end  % suptitle('Horizontal');end